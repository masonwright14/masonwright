#!/usr/bin/perl -w
# cryptograms.pl

# Generates random cryptograms from a list of hundreds of Tom Swifty sentences.
# Offers up to 6 "hint" letter pairs for each puzzle if user wishes.
# Prints out the solution, including the secret phrase and all letter pairs in the code.


##############################
#
# Flow overview:
#
# (first: randomly selects secret phrase from array)
# welcome_screen / prompt to hit enter
# jumble_alphabet: Uses List::Util module to shuffle an array of the alphabet. Then places
#                  the result in a hash with the un-scrambled alphabet as the key.
# encode_phrase: Splits the secret phrase into a character array, replaces each entry with its
#                 value in the hash, and prints the result (the puzzle).
# show_hint: Prints a random key-value pair for key letter e, t, a, o, i, or s. Later,
#            this subroutine gives a random hint from the remaining letters, or returns
#            that no more hints are available.
# give_up: User can ask for another hint, or ask for the solution.
#
#
##############################


use strict;

use List::Util 'shuffle'; # this module is used to shuffle the alphabet array randomly

my @letters = ("a".."z");
my @shuffled_letters; #these will go in a hash, keyed by the unshuffled alphabet
my %shift; #this is the hash
my $counter; # used to put the two arrays into hashed pairs, by counting up their indexes in a loop
my @hint_letters = qw(e t o a i s); # the six most common letters: etaios, whose key-pairs are given as hints in random order [these are uncoded]
my $rand; #the currently selected (random) index of the array of hint_letters
my $hint; # the current hint letter [before coding]

# this is a list of Tom Swifties, chosen for having at least 40 characters, to facilitate cryptogram solving, and for not having many special characters or symbols. They are separated by double colons, delimited by |, to allow for normal punctuation.
my $swift_list = q|"I'm wearing my wedding ring," said Tom with abandon.::"The number of people not attending class today really bothers me," said the professor absent-mindedly.::"What DID that brain surgeon do to me," Tom said absentmindedly.::"This is the first step towards my thesis," said Tom abstractly.::"The executioner has received the tool he needs," said Tom with a heavy accent.::"I got this ball-point pen from a Yugoslav friend," said Tom acerbically.::"This salad dressing has too much vinegar," said Tom acidly.::"All right - we'll use a water solution," Tom acquiesced.::"Here's your allowance for the next two weeks," Tom advanced.::"Those hookers are putting notices in the personals," Tom advised.::"I could stand to lose 50% of my body weight," said Tom affably.::"My neurotic blood-sucking arachnid has put on weight," said Tom, his nervous tic showing again.::"England is okay, except there seems to be at least one blood-sucking insect in every outhouse," said Tom aloofly.::"Everything Albert says is so obvious," said Tom altruistically.::"How on Earth did I get lost in here," Tom said in amazement::"Orgasms are overrated," said Tom anticlimactically.::"We had trouble with the propulsion systems for those moon flights," said the NASA engineer apologetically.::"Here's the story of the Liberty Bell," Tom told us appealingly.::"My compliments to the company that makes the Macintosh computer," said Tom applaudingly.::"I'm of greater value to you every day," said Tom appreciatively.::"Mondays, Wednesdays, and Fridays I sleep in a wigwam; Tuesdays, Thursdays, and weekends I sleep in a teepee," said Tom very attentively.::"It's an actual parameter, not a formal parameter," was Tom's argument.::"You have the right to remain silent," said Tom arrestingly.::"I'm a better shot than William Tell," said Tom arrogantly.::"I've had it up to here with Post-Modern Expressionism," said the goat artfully.::"One of the ten finalists in the 'London derriere' contest had to drop out," said Tom asininely.::"It's not a candy mint, it's a breath mint," Tom asserted.::"I should never have eaten all those beans", said Tom astutely.::"I wrote the book on that subject," said Tom authoritatively.::"I don't want to rewrite this in prose," said Tom aversely.::"What do ants and bees use for cattle?" asked Tom avidly.::"That city will NEVER be rebuilt," the prophets babble on.::"I'm going to get a hair transplant," said Tom baldly.::"I'll get you out of prison in no time," said Tom balefully.::"Those ballet students should be forced to do their exercises in the nude," said Tom barbarically.::"Boy, will I give YOU a haircut!" said Tom barbarously.::"Dorothy, if you're going to Oz again, I'm going with you," Em barked.::"This is the most common language used on micros," said Tom basically.::"I just swallowed a fishing lure," said Tom with baited breath.::"Ouch! When I get stung, I want revenge," said Tom begrudgingly.::"I'm sure we can fool them into thinking this is pollen," said Tom beguilingly.::"I'm being sent down to the minors," said Tom beleagueredly.::"Why shouldn't I stir my yogurt with a ball-point pen?" Tom bickered.::"These bit patterns will be more readable in groups of 8," said Tom bitingly.::"Well, I got here with five minutes to spare," said Tom bitterly.::"Rasputin and I are lovers," said Nicholas bizarrely.::"My giant sea creature died," Tom wailed blubberingly.::"My ancestor was a famous Confederate general who had an army fort named after him," Tom bragged.::"I ain't afraid of those white men," said Cochise bravely.::"Now no-one can detect my halitosis," said Tom breathlessly.::"There's a blood-sucking insect in my French cheese," said Tom briefly.::"Eating uranium can cause strange effects," said Tom brightly.::"We don't have room for any more peripherals," said Tom bus-ily.::"Zoos are a necessary evil, I think," said Tom cagily.::"The pool player from USC had to drop out because the proper equipment didn't arrive on time," Tom calculated.::"So this is your new computer!" said Tom calculatingly.::"Rowing so much hurts my hands," said Tom callously.::"I've grown fat on the contents of charity packages," said Tom carefully.::"Why do you bother? I for one couldn't...," said Tom carelessly.::"I don't work here on a regular basis," said Tom casually.::"One can't dispute the fundamental importance of learning the alphabet," Abie ceded.::"I'm afraid you've had a stroke," said Tom cerebrally.::"The number after nine must be knighted," said Tom certainly.::"I admit to being amused by your long joke with the stupid punch line," said Tom, chagrined.::"I don't need the mantissa of the logarithm," said Tom characteristically.::"All ancient Chinese artifacts should be burned," said Tom charmingly.::"It's not polite to look directly at a man," Mary chastised.::"I'm having an affair with my gamekeeper," said the lady chattily.::"I've run out of laundry detergent," said Tom cheerlessly.::"That gives me a birdie for this hole," Tom chipped in.::"You could try changing the layout of this microprocessor," Tom chipped in.::"Another plate of steamers all around!" Tom clamored.::"My family has a great future," said Tom clandestinely.::"Help me set fire to this cross," said Tom clannishly.::"In my next film I play the part of Sir Edmund Hillary," said Tom climactically.::"My job is to lead the audience's applause," Tom clucked.::"Pretend we were in the days before railways," Tom coached.::"I'm a Soviet military official," Tom commiserated.::"I'm putting this microfiche back where it belongs," said Tom complacently.::"Okay, you can switch on the electric chair now," said Tom conceitedly.::"MY frozen orange juice requires you to add SIX cans of water," said Tom with great concentration.::"The prisoner escaped by climbing down a rope," said Tom condescendingly.::"I organized that big party for the prisoners," Tom confessed.::"The prisoners set up a corporation," the warden confirmed.::"All right, I will allow the prisoners to wear perfume," the warden consented.::"We're currently thinking about a figure somewhere between 7 and 9," said Tom considerately.::"Don't worry, I'll take full responsibility for providing the prisoner with getaway footwear," said Tom consolingly.::"Hey, what's it worth if I can help you to escape from prison?" asked Tom contemptuously.::"The escaped prisoner is camping out in the woods," said Tom contentedly.::"I favor self-restraint everywhere in North America," said Tom continently.::"All I ever do is milk this damn cow," Tom uttered continuously.::"I'm writing a poem about the rebels in Nicaragua," said Tom controversially.::"I find you guilty!" said the judge with conviction.::"We've taken over the government," the general cooed.::"I deal with things by abstaining," said Tom copacetically.::"The size of those cobs is a-maize-ing!" was Tom's corny joke.::"It's better to steal things together," Tom corroborated.::"We could use the Geiger-Muller method to check for radiation leaks," Tom countered.::"I manufacture those tabletops that separate store clerks from their customers", said Tom counterproductively.::"I hate climbing this winding staircase," said Tom coyly.::"That's the last time I go to a whorehouse," said Tom crabbily.::"How do you start a model-T Ford without a battery?" asked Tom crankily.::"I have a theory about how certain North American Indians maintained their energy levels through the winter," said Tom creatively.::This must be the high-voltage lead, said Tom crisply.::"Father, forgive them, for they know not what they do!" said Jesus crossly.::"I've spotted more blackbirds than you have," Tom crowed.::"Now THAT's sloppy embroidery," Tom needled cruelly.::"This has been a grave undertaking," said Tom cryptically.::"I wonder why uranium is fluorescent," said Mary curiously.::"So THAT's where the next character is going to appear," said Tom after a cursory glance.::"This is as vile as the Threepenny Opera," said Tom curtly.::"I'm too smart to believe in Jesus Christ," said Tom with damnable cleverness.::"That hydroelectric facility is so beautiful I think I'll pass out!" said Tom, fainting with dam praise.::"I wonder if I'd have better luck if I fished with a net," Tom debated.::"How many dings you got in your door, there, Tom?" "Ten," Tom replied decadently.::"What's wrong with a few tea leaves?" asked Tom deceivingly.::"Let me clean out this poison tank," said Tom deceptively.::"Well, that tree definitely isn't a conifer," Tom decided.::"I've had enough of this rotten apple juice," Tom decided.::"I'm not going to eat any more of those pastries," Tom de-eclaired.::"I've already given you the nominative, vocative, accusative, genitive, dative, and ablative, so I will say no more," Tom declined.::"I don't want a bottle that can exist only in hyperspace," Tom declined.::"Adherents of my religion don't all have to believe the same thing," Tom decreed.::"I have to attend my PhD oral examination," said Tom defensively.::"Sure, I'll get rid of those jewels for you," said Tom defensively.::"I refuse to obey that French 'No Smoking' sign," fumed Tom defensively.::"Okay, you can have the gloves without lining," Tom deferred.::"I still think we should differentiate the magnetic flux," said Tom defiantly.::"You are going to fail my class," said the teacher degradingly.::"I think all those feminists should be forced to work as housewives," said Tom deliberately.::"People who sell fancy foods should be careful with knives," said Tom delicately.::"Oh, goody! Another blackout!" said Tom delightedly.::"Welcome to the Annual Meat cutter's Convention!" delivered Tom.::"This is how to put an imp in a restraining jacket," Tom demonstrated.::"This, that, these, those, and such," said Tom demonstratively.::"Wouldn't just gold and frankincense do?" the Magi demurred.::"I CAN'T be drowning in African waters!" pleaded Tom, deep in denial.::"I have to insert this wooden spatula in your mouth," said Tom depressingly.::"No pilaf for me, please," said Tom derisively.::"This is how he murdered the mystery writer," Tom described.::"Let me improvise this part," said Tom descriptively.::"I haven't put air in my fifth tire," said Tom despairingly.::"It's best to find a new word for this," Tom determined.::"I saw that man remove my ballot from the box," said Tom devotedly.::"Of course you graduated," said Tom diplomatically.::"I was removed from office," said Tom disappointedly.::"I'll not have you punk rockers making music in MY auditorium," said Tom disconcertingly.::"Let me out of this embassy," said Tom disconsolately.::"Someone stole my computer terminal," said Tom disconsolately.::"Boy, that sure took the wind out of my sails!" said Tom disgustedly.::"I have to wear this cast for another six weeks," said Tom disjointedly.::"I just got a sex change," said Tom, feeling rather disorganized.::"I just got kicked out of China!" said Tom, rather disoriented.::"Turn the record player down," said Tom disquietingly.::"Out, out, damned spot!" said Lady Macbeth disdainfully. "Look what you did to the rug, you naughty dog!"::"Quick! Hide all the religious pamphlets!" said Tom distractingly.::"I'm tearing my hair out over this problem," said Tom distressingly.::"I need a Latin Bible suitable for reading under water," Tom divulged.::"I've got to reach Kenilworth tonight," said Tom, trotting doggedly onward.::"Female canines often scratch the parasites on the coats of their young," said Tom dogmatically.::"I won't believe that you're the resurrected Jesus until I've felt the nail-holes in your wrists," said Tom doubtingly.::"I dropped my brace over the balcony," said Tom downcastly.::"This feather seems to improve the act," said Tom dramatically.::"I'm pretty good at basketball," said Tom, dribbling.::"I never go into saloons," said Tom drily. "I've seen too many of my friends enter them optimistically and leave them misty optically."::"Bartender, I'll have another martini," Tom said dryly.::"Why would anyone want to start an Institute for the Mute?" asked Tom dumbfoundedly.::"I'll pay off that customs official," said Tom dutifully.::"You've stowed his ashes commendably," was Tom's well-earned compliment.::"I am NOT a homosexual necrophiliac," said Tom in dead earnest.::"I've declared the variable X so that its value is saved from one procedure invocation to the next," said Tom ecstatically.::"The enemy has taken stronghold F," said Tom effortlessly.::"Yes, I was in the chicken coop when it exploded," admitted Tom, with egg on his face.::"This computer display is shocking," said Tom electrically.::"I got a personal letter from Ann Landers," was Tom's epigraph.::"I just hung my sheets on the clothesline," said Tom erringly.::"I wouldn't marry you even if you were the only woman on earth!" said Tom evenly.::"Just what kind of show can this troupe 'The Humpty Dumpties' put on?" asked Tom exactingly.::"I wrote that window system for MIT," Tom exclaimed.::"I had to fire my first mate when she got too heavy for the boat," said Tom excruciatingly.::"Here, son, have a free balloon!" said Tom expansively.::"My mother's sister will be here any minute," said Tom expectantly.::"Perhaps he's a former Palestinian commie?" explored Tom.::"But suppose X does exist after all," Tom expostulated.::"You must give me my alimony," expressed Tom's former wife, after which Tom almost expounded.::"These genes are dominant," said Tom expressively.::"I used to work for Kelly Services," Tom extemporized.::"I used to work for the railway company," said Tom extraneously.::"I used to command a battalion of German ants," said Tom exuberantly.::"I failed my electrocardiogram," said Tom faint-heartedly.::"Please keep Ian on salary even if he does no work; banish not sweet Ian, kind Ian, true Ian, valiant Ian from thy company," was Tom's Falstaffian plea.::"I'm trying to get some air circulating up here just beneath the roof," said Tom fanatically.::"The transit system could reduce its deficit by steeply charging those passengers on their way to rock concerts and sports events," said Tom with considerable fanfare.::"The Soviet press is useful on hot days," said Tom fantastically.::"I don't want my cow to be artificially inseminated," was Tom's favorable response.::"You can use my stud for 100 dollars," was Tom's feeble offer.::"Albert, that illegal left turn is going to cost you twenty bucks," said the policeman finally.::"I plan to work for Digital," said Tom, giving me the finger.::"My spinal cord has been given notice," Tom fired back.::"You should *never* burn the Stars and Stripes!" cried Tom flagrantly.::"I love trying to make insects fly," said Tom flippantly.::"I wouldn't mind running my fingers over THOSE!" said Tom fondly.::"I don't know how much longer I'll need only three of my houses," said Tom forebodingly.::"I'm no good at golf. I know I'm going to hit another bad shot," Tom forewarned.::"Now all I have to do for this banknote is engrave the portrait," Tom forged ahead.::"I got the first three wrong," said Tom forthrightly.::"I do NOT have a multiple personality disorder," said Tom, trying to be frank.::"I can't play the guitar because my fingers are too big," said Tom fretfully.::"Please pass me the oranges," was Tom's fruitless request.::"I don't believe in mixed marriages," said Tom gaily.::"I won't be on time for the Christmas party because some joker put glue on the bottoms of my shoes," Tom gesticulated.::"Oh, this house tastes good!" said Hansel and Gretel, gingerly.::"Someone bumped into me while I was brushing my teeth," said Tom with a gleam in his eye.::"Help, I'm drowning!" was Tom's glib, glib, glib chortle.::"PLEASE don't let me fall apart," pleaded Tom gloomily.::"Eating uranium makes me feel funny," said Tom glowingly.::"For the meal we are about to receive, may the Lord make us truly thankful," said Tom gracefully.::"My dime rolled into the sewer," cried Tom gratefully.::"I'll try to dig up a couple of friends," said Tom gravely.::"Let's invite Greg and Gary," said Tom gregariously.::"I can eat one hundred and forty-four," Tom boasted grossly.::"Mash that avocado and add some seasoning," said Tom guacamole.::"I know how to communicate sequential processes," said the whore guardedly.::"And to think I swallowed that lie, hook, line and sinker!" Tom gulped.::"I've been having an incontinence problem," Tom gushed.::"That may cause my violin strings to snap," was Tom's gut reaction.::"The pH of this solution is just 3.5," said Tom half-assedly.::"Mr. Rockefeller did not bring his wife," said Tom haplessly.::"Oh, stop talking about the Dreyfus case. Don't you like the color of my eyes?" asked Esther hazily.::"Theodore, you will soon be promoted from editor to editor-in-chief," said the cannibal heatedly.::"These boxing gloves are too big," said Tom heavy-handedly.::"May I leave the room?" asked the schoolboy, high-handedly.::"Troops, I guess there won't be a Christmas show this year," said Tom hopelessly.::"Have a ride in my new ambulance," said Tom hospitably.::"These pants are not short enough," said Mary hotly.::"The doctors had to remove a bone from my arm," said Tom humorlessly.::"I cut off the bottoms of my trousers so they wouldn't drag in the mud," said Tom hygienically.::"Hey, like, sailing the seven seas is really far out, man," said Tom hypnotically.::"Boy, that's an ugly hippopotamus!" said Tom hypocritically.::"Doctor, why do you have to remove my womb?" asked Mary hysterically.::"It's a pity that Amin managed to escape from Uganda when his ship of state went under," said Tom idiosyncratically.::"Alas, I am sick with love for the fair Igraine!" said Uther Pendragon illustriously (and achingly).::"I run a fairground attraction called 'See a real demon for only one cent!'" said Tom impenitently.::"Promote that demon to the House of Lords," commanded Tom imperiously.::"I brush my teeth every five minutes," said Tom implacably.::"There's nothing wrong with demons," was Tom's implicit message.::"Close the hatch! We're being invaded by bugs!" said Tom importantly.::"Boy, am I impressed!" said Tom as he joined the British Navy.::"I keep picking up radio signals from outer space," said Tom impulsively.::"I'm taking over this hotel," said Tom inappropriately.::"Things are always happening to me," said Tom incidentally.::"I come to this hotel year after year for the science fiction convention," said Tom inconsequentially.::"Why you parasitic insect, our debts now exceed our assets!" said Tom incredulously.::"I'm not sure how I feel about that particular matrix operation," said Tom indeterminately.::"I sent Kathleen on a mission to the Antilles," Tom indicated.::"I learned a lot about women while I was in Paris," said Tom indifferently.::"There's safety in unexciting gentlemen," said Mary indulgently.::"She wore a smoke-colored dress at dinner," said Tom ingratiatingly.::"Have it monogrammed," was Tom's initial suggestion.::"I'm not leaving the chapel until I finish this painting," Michelangelo insisted.::"Let's have a crimson display -- and turn up the brightness," said Tom with passionate intensity.::"What I do best on a camping trip is sleep," said Tom intently.::"Cheryl, you stand between Ella and Pauline," interposed the photographer.::"I've got to find out why my broker got fired," said Tom as he investigated.::"Your drip-dries are crumpled," said the laundress ironically.::"There is no end to this sequence of digits," said Tom irrationally.::"My Chinese necklace has been stolen," said Mary jadedly.::"Your meat, madam!" announced the two butcher boys jointly.::"I always stammer just before July," was Tom's jejune explanation.::"I plan to start a cattle ranch in a space station orbiting Jupiter," said Tom jovially.::"The insect in William's hand is wearing a yarmulke!" said Tom jubilantly.::"After the trial I sold a dozen pieces of the rock," said the insurance salesman jurisprudently.::"I like ragged margins," said Tom without justification.::"Why do they burn aromatic substances at these tournaments?" asked Tom, justly incensed.::"This will get me into the royal bedroom," said Tom kinkily.::"I tend to use infinitives rather than gerunds," said Tom knowingly.::"Flying saucers use antigravity to stay up," said Tom knowingly.::"I've forgotten that song Dr. Chandra taught me," said HAL lackadaisically.::"No ellipses, no parabolas, and no hyperbolas," said Tom laconically.::"I bought these peanuts in Los Angeles," said Tom lagubriously.::"I think I've lost my leg, sir," reported Uxbridge lamely. "By God, so you have!" replied Wellington generally.::"Please save the branches of our trees," said Tom limply.::"I like writing artificially intelligent programs," Tom lisped.::"Gentlemen: Please send me your catalogue," wrote Tom, listlessly.::"I want to be carried in a covered couch," said Tom literally.::"Is it true that some animals will eat their own babies?" asked Tom literately.::"Choir up!" commanded the church conductor loftily.::"What's the score in the Stevie Wonder - Ray Charles tennis game?" asked Tom lovingly.::"No, you have to do it again," reiterated Tom loopily.::"I chop down trees for a living," said Tom lumberingly.::"Of course I can make armor out of chains," Tom replied by mail.::"It's usually just food poisoning," said Tom mainly.::"I have to fix all the bugs, and add some new features," Tom maintained.::"I hope my mother gets hit by a steamroller," said Tom malevolently.::"Let's go and fly around the street lights, children," said the mammoth.::"I don't want a second helping, thank you," said the cannibal manfully.::"Add up this list of n numbers and then divide the sum by n," said Tom meanly.::"According to this sonograph, the average frequency of my speaking voice is 160 Hz," said Tom in measured tones.::"My dog will only eat cantaloupes," was Tom's melancholy complaint.::"A thousand thanks, Monsieur," said Tom mercifully.::"You and Patricia deserve each other," said Tom meretriciously.::"You don't have to introduce us," said Tom metaphorically.::"I've done more than talk to her on the phone," said Tom metaphysically.::"Yes, I wrote 'Pictures at an Exhibition', but only the piano version," said the composer modestly.::"I have a patent cure for 'the kissing disease'," said Tom monotonically.::"What we need is more people like Ronald Reagan and Ronald McDonald," said Tom moronically.::"Look! There's a male cow with some chrysanthemums on it!" Tom mumbled.::"Ouch! I pinched my cheek trying to put on this earring," said Mary mysteriously.::"Why are you lying down so close to me?" asked Adam naively.::"What would be a good name for a girl born on Christmas Day?" asked Tom, adjusting his tie nattily.::"Boy, am I feeling blue!" said Tom as he joined the British navy.::"The monster in the lake has eaten my cake," said Tom necessarily.::"Someone stole my electrolytic capacitor!" Tom charged negatively.::"I got a snapshot of the CBS anchorman, but I haven't developed it yet," said Tom, rather negatively.::"Honey, put on that see-through thing," said Tom negligently.::"I got five cavities since my last dentist's visit," said Tom neurotically.::"You may take a vacation in the south of France," said Tom nicely.::"You could always sound-proof your apartment," Tom allowed noisily.::"The proof of the pudding is in the eating," said Tom nonjudgmentally.::"The performance was equal to the music," said Tom noteworthily.::"I haven't a notion," said Poseidon when the sea dried up.::"This Neanderthal needs something to eat," Tom observed.::"That horse looks like a good bet at 75 to 3," said Tom oddly.::"Oops! There goes my hat!" said Tom off the top of his head.::"A prostitute says 'Aren't you finished yet?', a nymphomaniac says 'Is that all?', and a wife says 'Beige... we should definitely paint the ceiling beige'," was Tom's off-color joke.::"I was caught stealing in Iran," said Tom offhandedly.::"Why shouldn't I talk to birds?" asked Tom as he ogled.::"My glasses are fogged up," said Tom optimistically.::"That bull has real stage presence," said Tom oratorically.::"I lost the debate because I ran out of things to say," said Tom outspokenly.::"I have too many children," said Mary overbearingly.::"All right, who hurled the ball through my window?" asked Tom painfully.::"Do not pound nails into glass," said Tom painstakingly.::"I killed and cremated the Greek piper god," said Tom with panache.::"I accidentally cut the Greek piper god while shaving him," Tom panicked.::"Now patients can get a second opinion without leaving the office," said Tom paradoxically.::"My chute weighs only two kilograms," said Tom parametrically.::"I'm having trouble keeping my balance," said Tom parenthetically.::"I'm doing a syntactic analysis of low, long-drawn sounds indicating discomfort," said Tom parsimoniously.::"I'm such a good marksman that you can throw away your hairbrush," was Tom's parting shot.::"I've got all the work I can handle," said the doctor patiently.::"You have to support the right party to get ahead," said the politician patronizingly.::"You're wearing a diaphragm," was Tom's penetrating observation.::"What's the best time to plant peonies?" was Tom's perennial question.::"Now where did I put that magazine?" Tom asked periodically.::"Daddy, could I please have an ant farm for Christmas?" asked Tom petulantly.::"I wonder what's causing this rasp in my voice," said Tom phlegmatically.::"I'm just sitting on a dock of the bay...," Tom sang piercingly.::"Eating uranium can cause atomic ache," said Tom with a high-pitched voice.::"I've just been lulled by the sound of the world's greatest tenor," said Tom placidly.::"I'm going to sue my real estate agent for not warning me the prairies were so flat," said Tom plaintively.::"It's a gift from an Oriental friend," said Tom pleasantly.::"I practiced three hours on my guitar," said Tom pluckily.::"Nevermore will I read 'The Raven'," said Tom poetically.::"It has zero height, zero width, and - well, maybe I'll allow it to have a bit of depth," said Tom, stretching the point.::"I've just been stabbed with an ice pick," said Tom pointedly.::"Ah, what could be better than sitting by my miniature lake and listening to the wind blow through the tree leaves?" asked Tom ponderously.::"There's no cola!" was the cry which popped out of Tom.::"To be a model or not to be," was the question Mary posed.::"I hope this is enough to feed my family," prayed the wolf.::"I haven't had any tooth decay YET," said Tom precariously.::"Multiplication before addition," said Tom, citing precedents.::"Oh dear, I forgot to take my pill," said Mary pregnantly.::"There's no need to perfume this after purchase," said Tom during his presentation.::"I know what a bunch of lions is called," said Tom with pride.::"I've been demoted from corporal," said Tom privately.::"Crosby is my favorite singer. Is he yours?" asked Tom probingly.::"The roof is leaking again," said Tom problematically.::"THIS is the real male goose," said Tom as he produced the propaganda.::"Stand over there so I can take your picture," proposed Tom to the hooker.::"Why shouldn't there be a special case for addressing people?" asked Tom provocatively.::"Oh boy, I'm head of the refreshment committee!" said Tom, pleased as punch.::"I have to sing a run of eighth-notes," said Tom quaveringly.::"Why would anyone want to play a role-playing game?" Tom questioned.::"That quadruplet doesn't seem to get along with his brothers and sister," said Tom quibblingly.::"Be careful with that silver stuff. It's mercury!" said Tom quickly.::"You really ought to study classical rhetoric," said Tom a quintillion times.::"This is the fastest way to get drunk," said Tom quixotically.::"Eating uranium makes me feel funny," said Tom radiantly.::"There are a lot of leaves in my yard," Tom said rakishly.::"I'm the world's most aggressive matador," Tom rambled.::"We publish one of the few dictionaries that define 'Tom Swifty'," said Tom at random.::"File a little more off that corner," said Tom raspingly.::"It's the quotient of two integers," said Tom rationally.::"This value has to be converted to floating point," Tom realized.::"I won't play the carillon again!" chimed Tom rebelliously.::"Why do I have to strip naked AGAIN?" asked Tom rebuffingly.::"I've thought of another exception," Tom rebutted.::"Those cars we shipped have a defective part," Tom recalled.::"I haven't had an accident in ten years," said Tom recklessly.::"I couldn't believe there were exactly 100 people there," Tom recounted.::Tom said recursively, "Tom said recursively, 'Tom said recursively, ...'"::"I will NOT splurge on a circuit-breaker," Tom refused.::"My next novel will be the greatest thing since _Finnegans Wake_," Tom rejoiced.::"I'm not going to give up anything this year. The year before last was quite enough," said Tom relentlessly.::"They're going to sue us again," said a reliable source.::"This student appealed his grade, so I have to score his exam again," Tom remarked.::"I'm in the process of documenting my BASIC program," Tom remarked.::"I'm investing in German currency once again," Tom remarked.::"I've gone back to using my maiden name," said Mary remissly.::"I'd better repeat that SOS signal -- no-one seems to have heard us," said Tom remorsefully.::"My garden needs another layer of mulch," Tom repeated.::"I'll try selling them at the next house," Tom replied.::"I'm taking this ship back in to the dock," Tom reported.::"I think I'll stand on the left side of the ship," Tom reported.::"Now we'll have to replace all the ship's windows," Tom reported.::"Must I show again why this theorem is true?" asked Tom reprovingly.::"How long will I have to wait for a table?" asked Tom without reservation.::"My new signature is no better than my old one," said Tom resignedly.::"I'm going to go live in the Canadian arctic," said Tom resolutely.::"I shall read the commands from that file again," said Tom resourcefully.::"That's the worst oyster I've ever eaten," said Tom wretchedly.::"Frankly, my dear, I don't give a damn," said Clark Gable rhetorically.::"My experiment was a success," the chemist retorted.::"And this is the way you get a sheep excited," Tom reviewed.::"What ample bosoms those chorus girls have!" remarked Tom robustly.::"When in Rome, do all the naughty things the Romans do," said Mary romantically.::"Let's take the traffic circle," said Tom, in a roundabout way.::"It's none of your @#$%*! business if I'm obese," swore Tom roundly.::"These Paris streets sure have funny names," said Tom ruefully.::"I guess she fell off the motorcycle," said Tom ruthlessly.::"I stole some eggs; how would you like them?" asked the poacher as he scrambled away.::"So only one person arrived at your party before I did?" Tom second-guessed.::"I can't tell you anything about my salivary glands," said Tom secretively.::"I'm going out with a mermaid tonight," said Tom sedately.::"Look what I can do with this eraser!" said Mickey Mouse self-effacingly.::"I was in my kayak, practicing my Eskimo roll," said Tom self-righteously.::"Of course I can be seen, heard, and smelt," said Tom sensibly.::"We're not in tune. Are you sure you aren't singing flat?" asked Tom sharply.::"No, you can't have any of my oysters," said Tom selfishly.::"How do you like my petticoat?" asked Mary shiftlessly.::"Goodbye, and thanks for the radio," said Tom with a short wave.::"Since the leftmost bit of a normalized mantissa is always 1, let's just omit it," said Tom significantly.::"My mother was unmarried and brought me up all by herself," said Tom single-mindedly.::"I just shoplifted from a major department store," said Tom sincerely.::"I just can't use Ethernet too often," said Tom sleepily.::"Listen to my Stallone impression," said Tom slyly.::"This brush isn't helping my hair one bit," Tom snarled.::"Some day, people will be able to file lawsuits against computers," said Tom soothingly.::"Jokes that bad are best handled with four feet of cold steel," said Tom sordidly.::"South Korea has a lovely capital city," said Tom soulfully.::"The optician probably doesn't have my glasses ready," Tom speculated.::"Hey, you're standing on my foot!" said Tom standoffishly.::"Boy, I wish the elevator were working," said a tired Tom, staring up to the top.::"Well, monaural and quadriphonic systems are the exception," said Tom stereotypically.::"Ah, now I can see through the window," said Tom stiltedly.::"Oops, I think I might have a piece of coal in my shorts," said Tom stochastically.::"Consult an investment broker," was Tom's stock answer.::"Can you hear me through this sieve?" was Tom's strained query.::"I feel like attacking a monarch," said Tom strikingly.::"I don't believe in the Heimlich maneuver," Tom struck back.::"That Amazon queen wanted me for only one thing," said Tom studiously.::"What should I do about this P.S.?" asked Tom submissively.::"Would you like some chocolate-covered insects on your long bun?" asked the waiter subserviently.::"There's no hope we'll get any dope when the captain looks up the periscope," said Tom subversively.::"Boy, what a super silly ass!" said Tom superciliously.::"That's a very large shark," said Tom superficially.::"Look at me, ma! I'm on top of the world - well, chimney, anyway," said Tom superfluously.::"The value of my waterfront property would increase if the U.S. and Canadian governments could agree to de-pollute the lake," said Tom in a superior manor.::"They'll want a picture of me at the dinner table," Tom supposed.::"That penny pincher always wants to be addressed in a formal manner," Tom surmised.::"Pass the Aunt Jemima," Tom asked surreptitiously.::"Yes, I've read _Gulliver's Travels_," replied Tom swiftly.::"I can be self-referential if I want to," said Tom swiftly.::"I love percussion instruments," said Tom symbolically.::"I studied law to learn ways to avoid getting caught," said Tom syntactically.::"For the umpteenth time, pass the sauce for the pancakes!" said Tom surreptitiously.::"Please don't sneeze with your mouth full," said the carpenter's assistant tactfully.::"I don't HAVE to do this for a living," said Mary tartly. "It's a business to do pleasure with you."::"Sometimes I prefer 'just intonation'; sometimes I prefer Pythagorean tuning," said Tom temperamentally.::"My bid for this contract aims to please," said Tom tenderly.::"Mondays, Wednesdays, and Fridays I think I'm a wigwam; Tuesdays, Thursdays, and weekends I think I'm a teepee," said Tom too tensely.::"Look at that monster's sandals!" said Tom in a thing-thong voice.::"It's cold, Timothy," said Tom with his distinctive timbre.::"Why are you writing elegies at THIS hour? You should be in bed, young lady," the curfew told Nell.::"How do you like this negligee?" asked Mary transparently.::"OK Mom, I'm going to hypnotize you now," said Tom transparently.::"I know what to do with stale cake," said Tom triflingly.::"I punched him in the stomach three times," said Tom triumphantly.::"I've brought back the lorry I borrowed," said Tom truculently.::"The bank doesn't even want me as a depositor," said Tom unaccountably.::"Let me see if I can prove that," said Tom unassumingly.::"Have some shampoo," was Tom's unconditional offer.::"I know you won't take my advice, Mr. Van Gogh, but after cutting your ear off, I think you should go to jail," said Tom unconvincingly; "-- or perhaps sign yourself in to a home," he added noncommittally.::"No, it didn't go up my sleeve," said Tom underhandedly.::"I don't think I'll have the pickled fish today," said Tom unerringly.::"The test came back Negative," Mary said unexpectedly.::"Carnivals are noisy and useless," griped Tom unfairly.::"You should never use a double negative, but it's okay this time," said Tom not unkindly.::"Oops, I've ripped my pants!" was Tom's unseemly comment.::"No, I won't give you a note saying you're excused," said Tom unwaveringly.::"The lion has its head caught in the skylight," said Tom uproariously.::"Now I've got uranium in my bloodstream!" said Tom vaingloriously.::"I will find out how many electrons that atom is sharing," said Tom valiantly.::"I'm clenching my jaw because our local clergyman has a toothache," said Tom vicariously.::"A spirit transported me from the couch to the chair," said Tom, visibly moved.::"Look at my shiny kitchen floor," said Tom, waxing enthusiastic.::"I'm not impotent and I don't suffer from premature ejaculation when given head," Tom sputtered weakly, much too soon for Mary's taste.::"Every second feels like it lasts for seven days," said Tom in a moment of weakness.::"I passed my electrocardiogram," said Tom wholeheartedly.::"I designate you my chief heir," said Tom willingly.::"This tooth extraction could take for ever," said Tom with infinite wisdom.::"All my knowledge cannot ease my arthritis," said the wiseacre.::"I wish I could remember the name of that card game," said Tom wistfully.::"I tried to stop the horse by pulling the cord on the back," was Tom's tale of woe.::"I'm knitting a sweater for my guppy," said Tom wolfishly.::"These jokes turn my stomach," said Tom wretchedly.::"Gin rummy with Brandy's scotched, Bud," whined Sherry wryly.::"Something will have to be done to reduce the brightness of that Jovian satellite," Tom yodeled.::"I used lots of detergent in late December," was Tom's yuletide comment.::"When I swore, my mother made me eat soap," said Tom zestfully.|;



my @swifties = split(/::/, $swift_list); # puts the Tom Swifties into an array

my $secret = $swifties[int(rand($#swifties))]; # picks a random entry as the secret phrase




welcome_screen ();

sub welcome_screen
        {print "\n\n\n++++++++++++++++++++++++++++++++++++++++++++\n\n++++++++++++++++++++++++++++++++++++++++++++\n\n\n\nTom Swifty Cryptograms\n\n
Solve the cryptogram on paper, then check your results.\n\n
Each cryptogram is a Tom Swifty!
Example:
\"Can I go looking for the Grail again?\" Tom requested.\n

You can get up to six hints.
(Anytime, type \"quit\" to exit.)\n\n";

         prompt ();
        }



sub prompt
        {print "Hint enter to play: ";
	 my $action = <STDIN>;

	 if ($action eq "\n")
	          {print "\n++++++++++++++++++++++++++++++++++++++++++++\n\n\n\nCryptogram:\n";
		   jumble_alphabet ();
		   }

	 elsif (lc($action) eq "quit\n")
	          {print "\nGoodbye.\n\n";
		   exit;
		   }

	 else {prompt ();}
        }



sub jumble_alphabet #scrambles the alphabet and makes a hash with ordered (non-scrambled) alphabet as the key
	  {@shuffled_letters = shuffle(@letters); # command is from List::Util

	   $counter = 0; # will count up indexes of shuffled letters
	   foreach my $element (@letters) # makes a hash from the two arrays of letters
	            {$shift{$element} = $shuffled_letters[$counter];
		     $counter ++;
		     }

	   foreach (keys %shift)   ### prevent any letter from being jumbled to itself.
	            {if ($_ eq $shift{$_}) # if any letter is paired with itself, the process is done over
		             {jumble_alphabet ();}
		    }

	   encode_phrase ();
	 }



sub encode_phrase #uses the hash to encode the chosen Tom Swifty
        {my @characters = split(//, $secret); #splits phrase into array of characters


	 foreach my $element (@characters)
	         {if ($element =~ /[A-Z]/)          #"if" loop handles uppercase letters in entry
		           {$element = lc($element);        # temporarily converts uppercase letter to lowercase
			    foreach (keys %shift)
			           {if ($element eq $_)
				           {$element = $shift{$_};   # replaces letter with hash value in %shift
					    $element = uc($element); # makes letter uppercase again
					    last;}
				    }
			    }
		  else
		           {foreach (keys %shift)             # for other characters: if equal to a hash key, replaces...
			           {if ($element eq $_)           # with the hash output
				          {$element = $shift{$_};
					   last;}
				    }
			    }
		  }              # saying "last" prevents an early letter from being...
                                       # changed more than once.


	 print "\n",@characters,"\n\n";         # prints array uninterpolated, so no extra spaces added

	 show_hint ();
        }




sub show_hint
        {if ($#hint_letters >= 0) # if all 6 hints have not been given
	        {$rand = int(rand($#hint_letters));  #pick random number, up to highest index of remaining hint letter array (etoais)

		 $hint = $hint_letters[$rand]; #set "hint" equal to the indexed letter

		 print "Hint: $shift{$hint} codes for $hint\n";

		 splice(@hint_letters, $rand, 1); # remove "hint" and its slot from the array of hints left to give
	         }

	 else 
	         {print "Sorry, no more hints are available.\n";}

	 give_up ();
        }


sub give_up
        {if ($#hint_letters >= 0)
	        {print "Type \"hint\" for another hint, or hit \"enter\" to see the answer: ";}
	 else 
	        {print "Hit \"enter\" to see the answer: ";}

	 my $action = <STDIN>;
	 if ($action eq "\n")
	        {foreach (sort {$shift{$a} cmp $shift{$b}} keys %shift) #sorts hash by value before printing.
		        {print "$shift{$_} codes for $_\n";}
		 print "\n$secret\n\n";
		 exit;
	         }
  
	 elsif (lc($action) eq "hint\n")
	        {show_hint ();}
	 elsif (lc($action) eq "quit\n")
	        {print "\nGoodbye.\n\n";
		 exit;
	         }
	 else 
	        {give_up ();}
         }
